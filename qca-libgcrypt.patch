--- qca-2.2.1/cmake/modules/FindLibGcrypt.cmake.orig	2019-04-24 14:58:14.000000000 +0200
+++ qca-2.2.1/cmake/modules/FindLibGcrypt.cmake	2024-10-23 19:45:55.330870021 +0200
@@ -14,7 +14,7 @@
 # libgcrypt is moving to pkg-config, but earlier version don't have it
 
 #search in typical paths for libgcrypt-config
-FIND_PROGRAM(LIBGCRYPTCONFIG_EXECUTABLE NAMES libgcrypt-config)
+FIND_PROGRAM(LIBGCRYPTCONFIG_EXECUTABLE NAMES pkg-config)
 mark_as_advanced(LIBGCRYPTCONFIG_EXECUTABLE)
 
 #reset variables
@@ -26,8 +26,8 @@ IF(LIBGCRYPTCONFIG_EXECUTABLE)
 
   # workaround for MinGW/MSYS
   # CMake can't starts shell scripts on windows so it need to use sh.exe
-  EXECUTE_PROCESS(COMMAND sh ${LIBGCRYPTCONFIG_EXECUTABLE} --libs RESULT_VARIABLE _return_VALUE OUTPUT_VARIABLE LIBGCRYPT_LIBRARIES OUTPUT_STRIP_TRAILING_WHITESPACE)
-  EXECUTE_PROCESS(COMMAND sh ${LIBGCRYPTCONFIG_EXECUTABLE} --cflags RESULT_VARIABLE _return_VALUE OUTPUT_VARIABLE LIBGCRYPT_CFLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  EXECUTE_PROCESS(COMMAND ${LIBGCRYPTCONFIG_EXECUTABLE} libgcrypt --libs RESULT_VARIABLE _return_VALUE OUTPUT_VARIABLE LIBGCRYPT_LIBRARIES OUTPUT_STRIP_TRAILING_WHITESPACE)
+  EXECUTE_PROCESS(COMMAND ${LIBGCRYPTCONFIG_EXECUTABLE} libgcrypt --cflags RESULT_VARIABLE _return_VALUE OUTPUT_VARIABLE LIBGCRYPT_CFLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
 
   IF(NOT LIBGCRYPT_CFLAGS AND NOT _return_VALUE)
     SET(LIBGCRYPT_CFLAGS " ")
